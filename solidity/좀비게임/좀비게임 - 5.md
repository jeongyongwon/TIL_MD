## ì´ë”ë¦¬ì›€ ìƒì˜ í† í°

- ì´ë”ë¦¬ì›€ì—ì„œ **_í† í°_**ì€ ê¸°ë³¸ì ìœ¼ë¡œ ê·¸ì € ëª‡ëª‡ ê³µí†µ ê·œì•½ì„ ë”°ë¥´ëŠ” ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì´ë„¤ 
- ì¦‰ ë‹¤ë¥¸ ëª¨ë“  í† í° ì»¨íŠ¸ë™íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” í‘œì¤€ í•¨ìˆ˜ ì§‘í•©ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ì§€. ì˜ˆë¥¼ ë“¤ë©´ `transfer(address _to, uint256 _value)`ë‚˜ `balanceOf(address _owner)` ê°™ì€ í•¨ìˆ˜ë“¤ì´ ìˆë„¤.

- ë‚´ë¶€ì ìœ¼ë¡œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ë³´í†µ `mapping(address => uint256) balances`ì™€ ê°™ì€ ë§¤í•‘ì„ ê°€ì§€ê³  ìˆìŒ. 

- ê°ê°ì˜ ì£¼ì†Œì— ì”ì•¡ì´ ì–¼ë§ˆë‚˜ ìˆëŠ”ì§€ ê¸°ë¡í•˜ëŠ” ê²ƒì´ì§€.

- ëª¨ë“  ERC20 í† í°ë“¤ì´ ë˜‘ê°™ì€ ì´ë¦„ì˜ ë™ì¼í•œ í•¨ìˆ˜ ì§‘í•©ì„ ê³µìœ í•˜ê¸° ë•Œë¬¸ì—, ì´ í† í°ë“¤ì— ë˜‘ê°™ì€ ë°©ì‹ìœ¼ë¡œ ìƒí˜¸ì‘ìš©ì´ ê°€ëŠ¥í•˜ë„¤.

- ì¦‰ ìë„¤ê°€ í•˜ë‚˜ì˜ ERC20 í† í°ê³¼ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í•˜ë‚˜ë¥¼ ë§Œë“¤ë©´, ì´ ì•±ì´ ë‹¤ë¥¸ ì–´ë–¤ ERC20 í† í°ê³¼ë„ ìƒí˜¸ì‘ìš©ì´ ê°€ëŠ¥í•œ ê²ƒì´ì§€. ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ìë„¤ì˜ ì•±ì— ë” ë§ì€ í† í°ë“¤ì„ ì¶”ê°€í•  ìˆ˜ ìˆì§€. ì»¤ìŠ¤í…€ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì§€ ì•Šê³ ë„ ë§ì´ë„¤. ìë„¤ëŠ” ê·¸ì € ìƒˆë¡œìš´ í† í°ì˜ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œë§Œ ë¼ì›Œë„£ìœ¼ë©´ ë˜ë„¤. ê·¸ëŸ¬ê³  ë‚˜ë©´, ì§ , ìë„¤ì˜ ì•±ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë˜ ë‹¤ë¥¸ í† í°ì´ ìƒê¸°ëŠ” ê²ƒì´ë„¤.

  

  ì´ëŸ¬í•œ ê²ƒì˜ í•œ ì˜ˆë¡œëŠ” ê±°ë˜ì†Œê°€ ìˆë„¤. í•œ ê±°ë˜ì†Œì—ì„œ ìƒˆë¡œìš´ ERC20 í† í°ì„ ìƒì¥í•  ë•Œ, ì‹¤ì œë¡œëŠ” ì´ ê±°ë˜ì†Œì—ì„œ í†µì‹ ì´ ê°€ëŠ¥í•œ ë˜ í•˜ë‚˜ì˜ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì´ë„¤. ì‚¬ìš©ìë“¤ì€ ì´ ì»¨íŠ¸ë™íŠ¸ì— ê±°ë˜ì†Œì˜ ì§€ê°‘ ì£¼ì†Œì— í† í°ì„ ë³´ë‚´ë¼ê³  í•  ìˆ˜ ìˆê³ , ê±°ë˜ì†Œì—ì„œëŠ” ì´ ì»¨íŠ¸ë™íŠ¸ì— ì‚¬ìš©ìë“¤ì´ ì¶œê¸ˆì„ ì‹ ì²­í•˜ë©´ í† í°ì„ ë‹¤ì‹œ ëŒë ¤ë³´ë‚´ë¼ê³  í•  ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” ê²ƒì´ì§€.

  ê±°ë˜ì†Œì—ì„œëŠ” ì´ ì „ì†¡ ë¡œì§ì„ í•œ ë²ˆë§Œ êµ¬í˜„í•˜ë©´ ë˜ë„¤. ê·¸ë¦¬ê³ ì„œ ìƒˆë¡œìš´ ERC20 í† í°ì„ ì¶”ê°€í•˜ê³  ì‹¶ìœ¼ë©´, ë°ì´í„°ë² ì´ìŠ¤ì— ë‹¨ìˆœíˆ ìƒˆ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œë¥¼ ì¶”ê°€í•˜ê¸°ë§Œ í•˜ë©´ ë˜ëŠ” ì¼ì´ì§€.

***ERC721 í† í°\***ì€ êµì²´ê°€ **ë¶ˆê°€**í•˜ë„¤. ê°ê°ì˜ í† í°ì´ ìœ ì¼í•˜ê³  ë¶„í• ì´ ë¶ˆê°€í•˜ê¸° ë•Œë¬¸ì´ì§€. ìë„¤ëŠ” ì´ í† í°ì„ í•˜ë‚˜ì˜ ì „ì²´ ë‹¨ìœ„ë¡œë§Œ ê±°ë˜í•  ìˆ˜ ìˆê³ , ê°ê°ì˜ í† í°ì€ ìœ ì¼í•œ IDë¥¼ ê°€ì§€ê³  ìˆë„¤. ê·¸ëŸ¬ë‹ˆ ì´ê²Œ ìš°ë¦¬ì˜ ì¢€ë¹„ë¥¼ ê±°ë˜í•  ìˆ˜ ìˆê²Œ í•˜ê¸°ì—ëŠ” ì•„ì£¼ ì ì ˆí•˜ì§€.



## RC721 í‘œì¤€, ë‹¤ì¤‘ ìƒì†

### í† í° ì»¨íŠ¸ë™íŠ¸ êµ¬í˜„í•˜ê¸°

#### - erc721.sol ë¶ˆëŸ¬ì˜¤ê¸° 

```js
contract ERC721 {
  event Transfer(address indexed _from, address indexed _to, uint256 _tokenId);
  event Approval(address indexed _owner, address indexed _approved, uint256 _tokenId);

  function balanceOf(address _owner) public view returns (uint256 _balance);
  function ownerOf(uint256 _tokenId) public view returns (address _owner);
  function transfer(address _to, uint256 _tokenId) public;
  function approve(address _to, uint256 _tokenId) public;
  function takeOwnership(uint256 _tokenId) public;
}
```



```js
pragma solidity ^0.4.19;

import "./zombieattack.sol";
// ì—¬ê¸°ì„œ import í•˜ê²Œ.
import "./erc721.sol";

// ì—¬ê¸°ì„œ ERC721 ìƒì†ì„ ì„ ì–¸í•˜ê²Œ.
contract ZombieOwnership is ZombieAttack, ERC721  {

}
```



### `balanceOf`

- ì´ í•¨ìˆ˜ëŠ” ë‹¨ìˆœíˆ `address`ë¥¼ ë°›ì•„, í•´ë‹¹ `address`ê°€ í† í°ì„ ì–¼ë§ˆë‚˜ ê°€ì§€ê³  ìˆëŠ”ì§€ ë°˜í™˜

```js
function balanceOf(address _owner) public view returns (uint256 _balance);
```

### `ownerOf`

- ì´ í•¨ìˆ˜ì—ì„œëŠ” í† í° ID(ìš°ë¦¬ì˜ ê²½ìš°ì—ëŠ” ì¢€ë¹„ ID)ë¥¼ ë°›ì•„, ì´ë¥¼ ì†Œìœ í•˜ê³  ìˆëŠ” ì‚¬ëŒì˜ `address`ë¥¼ ë°˜í™˜

```js
function ownerOf(uint256 _tokenId) public view returns (address _owner);
```



```js
  function balanceOf(address _owner) public view returns (uint256 _balance) {
    // 1. ì—¬ê¸°ì„œ `_owner`ê°€ ê°€ì§„ ì¢€ë¹„ì˜ ìˆ˜ë¥¼ ë°˜í™˜í•˜ê²Œ.
    return ownerZombieCount[_owner];
    ## mapping ëœ ìë£Œì„ => 
  }

  function ownerOf(uint256 _tokenId) public view returns (address _owner) {
    // 2. ì—¬ê¸°ì„œ `_tokenId`ì˜ ì†Œìœ ìë¥¼ ë°˜í™˜í•˜ê²Œ.
    return zombieToOwner[_tokenId];
  }
```



### ë¦¬íŒ©í† ë§

ì´ì „ ì±•í„°ì—ì„œ ìš°ë¦¬ëŠ” `ownerOf`ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í–ˆë„¤. í•˜ì§€ë§Œ ë ˆìŠ¨ 4ì—ì„œ, ìš°ë¦¬ëŠ” `zombiefeeding.sol`ì—ì„œ `ownerOf`ì™€ ë˜‘ê°™ì€ ì´ë¦„ì˜ `modifier`ë¥¼ ë§Œë“¤ì—ˆë„¤.

ìë„¤ê°€ ì´ ì½”ë“œë¥¼ ì»´íŒŒì¼í•˜ë ¤ í•œë‹¤ë©´, ì»´íŒŒì¼ëŸ¬ê°€ ë˜‘ê°™ì€ ì´ë¦„ì˜ ì œì–´ìì™€ í•¨ìˆ˜ë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤ë©° ì—ëŸ¬ë¥¼ ë§Œë“¤ì–´ë‚¼ ê²ƒì´ë„¤.

ê·¸ë ‡ë‹¤ë©´ ìš°ë¦¬ê°€ `ZombieOwnership`ì˜ í•¨ìˆ˜ ì´ë¦„ì„ ë‹¤ë¥¸ ê±¸ë¡œ ë°”ê¿”ì•¼ í• ê¹Œ?

ì•„ë‹ˆ, ê·¸ë ‡ê²Œ í•  ìˆ˜ëŠ” ì—†ë„¤!!! ìš°ë¦¬ëŠ” ERC721 í† í° í‘œì¤€ì„ ì‚¬ìš©í•˜ê³  ìˆìŒì„ ê¸°ì–µí•˜ê²Œ. **ì´ ë§ì¸ì¦‰ ë‹¤ë¥¸ ì»¨íŠ¸ë™íŠ¸ë“¤ì´ ìš°ë¦¬ì˜ ì»¨íŠ¸ë™íŠ¸ê°€ ì •í™•í•œ ì´ë¦„ìœ¼ë¡œ ì •ì˜ëœ í•¨ìˆ˜ë“¤ì„ ê°€ì§€ê³  ìˆì„ ê²ƒì´ë¼ ì˜ˆìƒí•œë‹¤ëŠ” ê²ƒì´ë„¤**. ê·¸ê²Œ ë°”ë¡œ ì´ëŸ° í‘œì¤€ì´ ìœ ìš©í•˜ê²Œë” í•˜ëŠ” ê²ƒì´ë‹ˆ ë§ì´ì•¼ - ë§Œì•½ ìš°ë¦¬ ì»¨íŠ¸ë™íŠ¸ëŠ” ERC721ì„ ë”°ë¥¸ë‹¤ëŠ” ê²ƒì„ ë‹¤ë¥¸ ì»¨íŠ¸ë™íŠ¸ê°€ ì•ˆë‹¤ë©´, ì´ ë‹¤ë¥¸ ì»¨íŠ¸ë™íŠ¸ëŠ” ìš°ë¦¬ì˜ ë‚´ë¶€ êµ¬í˜„ ë¡œì§ì„ ëª¨ë¥´ë”ë¼ë„ ìš°ë¦¬ì™€ í†µì‹ í•  ìˆ˜ ìˆë„¤.

=> **ìš”ì•½ (ê°™ì€ ì´ë¦„ì˜ ì œì–´ìí•˜ë©´ ì•ˆë¨) / ì»´íŒŒì¼í•˜ë©´ ì—ëŸ¬ë‚¨**



### ERC721: ì „ì†¡ ë¡œì§

- ìš°ë¦¬ì˜ ERC721ì—ì„œ í•œ ì‚¬ëŒì´ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì†Œìœ ê¶Œì„ ë„˜ê¸°ëŠ” ê²ƒì„ êµ¬í˜„

```js
# í† í°ì„ ë³´ë‚´ëŠ” ì‚¬ëŒì´ í˜¸ì¶œ
function transfer(address _to, uint256 _tokenId) public;
function approve(address _to, uint256 _tokenId) public;
# í† í°ì„ ë°›ëŠ” ì‚¬ëŒì´ í˜¸ì¶œ
function takeOwnership(uint256 _tokenId) public;

```

1. ì²« ë²ˆì§¸ ë°©ë²•ì€ í† í°ì˜ ì†Œìœ ìê°€ ì „ì†¡ ìƒëŒ€ì˜ `address`, ì „ì†¡í•˜ê³ ì í•˜ëŠ” `_tokenId`ì™€ í•¨ê»˜ `transfer` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë„¤.
2. ë‘ ë²ˆì§¸ ë°©ë²•ì€ í† í°ì˜ ì†Œìœ ìê°€ ë¨¼ì € ìœ„ì—ì„œ ë³¸ ì •ë³´ë“¤ì„ ê°€ì§€ê³  `approve`ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë„¤. ê·¸ë¦¬ê³ ì„œ ì»¨íŠ¸ë™íŠ¸ì— ëˆ„ê°€ í•´ë‹¹ í† í°ì„ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ í—ˆê°€ë¥¼ ë°›ì•˜ëŠ”ì§€ ì €ì¥í•˜ì§€. ë³´í†µ `mapping (uint256 => address)`ë¥¼ ì¨ì„œ ë§ì´ì§€. ì´í›„ ëˆ„êµ°ê°€ `takeOwnership`ì„ í˜¸ì¶œí•˜ë©´, í•´ë‹¹ ì»¨íŠ¸ë™íŠ¸ëŠ” ì´ `msg.sender`ê°€ ì†Œìœ ìë¡œë¶€í„° í† í°ì„ ë°›ì„ ìˆ˜ ìˆê²Œ í—ˆê°€ë¥¼ ë°›ì•˜ëŠ”ì§€ í™•ì¸í•˜ë„¤. ê·¸ë¦¬ê³  í—ˆê°€ë¥¼ ë°›ì•˜ë‹¤ë©´ í•´ë‹¹ í† í°ì„ ê·¸ì—ê²Œ ì „ì†¡í•˜ì§€.

ìë„¤ê°€ ëˆˆì¹˜ë¥¼ ì±˜ì„ì§€ ëª¨ë¥´ê² ì§€ë§Œ, `transfer`ì™€ `takeOwnership` ëª¨ë‘ ë™ì¼í•œ ì „ì†¡ ë¡œì§ì„ ê°€ì§€ê³  ìˆë„¤. ìˆœì„œë§Œ ë°˜ëŒ€ì¸ ê²ƒì´ì§€(ì „ìëŠ” í† í°ì„ ë³´ë‚´ëŠ” ì‚¬ëŒì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„¤; í›„ìëŠ” í† í°ì„ ë°›ëŠ” ì‚¬ëŒì´ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ì§€).

ê·¸ëŸ¬ë‹ˆ ì´ ë¡œì§ë§Œì˜ í”„ë¼ì´ë¹— í•¨ìˆ˜, `_transfer`ë¥¼ ë§Œë“¤ì–´ ì¶”ìƒí™”í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë„¤. ë‘ í•¨ìˆ˜ì—ì„œ ëª¨ë‘ ì“¸ ìˆ˜ ìˆë„ë¡ ë§ì´ì•¼. ì´ë ‡ê²Œ í•˜ë©´ ë˜‘ê°™ì€ ì½”ë“œë¥¼ ë‘ ë²ˆì”© ì“°ì§€ ì•Šì•„ë„ ë˜ì§€.

`ownerZombieCount`(í•œ ì†Œìœ ìê°€ ì–¼ë§ˆë‚˜ ë§ì€ ì¢€ë¹„ë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ ê¸°ë¡)ì™€ `zombieToOwner`(ì–´ë–¤ ì¢€ë¹„ë¥¼ ëˆ„ê°€ ê°€ì§€ê³  ìˆëŠ”ì§€ ê¸°ë¡)

```js
  function _transfer(address _from, address _to, uint256 _tokenId) private {
    ownerZombieCount[_to]++;
    ownerZombieCount[_from]--;
    zombieToOwner[_tokenId] = _to;
    Transfer(_from, _to, _tokenId);
  }

  function transfer(address _to, uint256 _tokenId) public onlyOwnerOf(_tokenId) {
    // 2. ì—¬ê¸°ì„œ í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê²Œ
    _transfer(msg.sender,_to,_tokenId);
  }


....ì°¸ê³ 
  modifier onlyOwnerOf(uint _zombieId) {
    require(msg.sender == zombieToOwner[_zombieId]);
    _;
  }
```



## ERC721: Approve

- `approve` / `takeOwnership`ì„ ì‚¬ìš©í•˜ëŠ” ì „ì†¡ì€ 2ë‹¨ê³„

1. ì†Œìœ ìì¸ ìë„¤ê°€ ìƒˆë¡œìš´ ì†Œìœ ìì˜ `address`ì™€ ê·¸ì—ê²Œ ë³´ë‚´ê³  ì‹¶ì€ `_tokenId`ë¥¼ ì‚¬ìš©í•˜ì—¬ `approve`ë¥¼ í˜¸ì¶œí•˜ë„¤.
2. ìƒˆë¡œìš´ ì†Œìœ ìê°€ `_tokenId`ë¥¼ ì‚¬ìš©í•˜ì—¬ `takeOwnership` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´, ì»¨íŠ¸ë™íŠ¸ëŠ” ê·¸ê°€ ìŠ¹ì¸ëœ ìì¸ì§€ í™•ì¸í•˜ê³  ê·¸ì—ê²Œ í† í°ì„ ì „ì†¡í•˜ë„¤.

ì´ì²˜ëŸ¼ 2ë²ˆì˜ í•¨ìˆ˜ í˜¸ì¶œì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì—, ìš°ë¦¬ëŠ” í•¨ìˆ˜ í˜¸ì¶œ ì‚¬ì´ì— ëˆ„ê°€ ë¬´ì—‡ì— ëŒ€í•´ ìŠ¹ì¸ì´ ë˜ì—ˆëŠ”ì§€ ì €ì¥í•  ë°ì´í„° êµ¬ì¡°ê°€ í•„ìš”í•  ê²ƒì´ë„¤.

```js
 // 1. ì—¬ê¸°ì— mappingì„ ì •ì˜í•˜ê²Œ.
  mapping (uint => address) zombieApprovals;

  function approve(address _to, uint256 _tokenId) public onlyOwnerOf(_tokenId) {
    // 3. ì—¬ê¸°ì„œ í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê²Œ.
      ## íŠ¹ì • ì¢€ë¹„ë¥¼ _toê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ”
    zombieApprovals[_tokenId] = _to;
      ## ìŠ¹ì¸ ì´ë²¤íŠ¸ ë°œìƒ
    Approval(msg.sender, _to, _tokenId);

  }

```



## ERC721: takeOwnership

```js
  function takeOwnership(uint256 _tokenId) public {
    // ì—¬ê¸°ì„œ ì‹œì‘í•˜ê²Œ.
      ## ìš”ì²­ì¸ê³¼ ì¢€ë¹„ ìŠ¹ì¸ ë°›ì€ ì‚¬ëŒì´ ê°™ëŠ”ì§€
    require(zombieApprovals[_tokenId] == msg.sender);
      ## ì›ë˜ ì£¼ì¸
    address owner = ownerOf(_tokenId);
      ## ë³´ë‚´ê¸°
    _transfer(owner,msg.sender,_tokenId);
  }
```



## ì˜¤ë²„í”Œë¡œìš° ë§‰ê¸°

### ì»¨íŠ¸ë™íŠ¸ ë³´ì•ˆ ê°•í™”: ì˜¤ë²„í”Œë¡œìš°ì™€ ì–¸ë”í”Œë¡œìš°

- ìš°ë¦¬ê°€ 8ë¹„íŠ¸ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” `uint8` í•˜ë‚˜ë¥¼ ê°€ì§€ê³  ìˆë‹¤ê³  í•´ë³´ì§€. ì´ ë§ì¸ì¦‰ ìš°ë¦¬ê°€ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê°€ì¥ í° ìˆ˜ëŠ” ì´ì§„ìˆ˜ë¡œ `11111111`(ë˜ëŠ” ì‹­ì§„ìˆ˜ë¡œ 2^8 - 1 = 255)ê°€ ë˜ê² ì§€.
- overflow ì˜ˆì‹œ

```js
uint8 number = 255;
number++;
```

ì´ ì˜ˆì‹œì—ì„œ, ìš°ë¦¬ëŠ” ì´ ë³€ìˆ˜ì— ì˜¤ë²„í”Œë¡œìš°ë¥¼ ë§Œë“¤ì—ˆë„¤ - ì¦‰ `number`ê°€ ì§ê´€ê³¼ëŠ” ë‹¤ë¥´ê²Œ 0ì´ ë˜ë„¤. ìš°ë¦¬ê°€ ì¦ê°€ë¥¼ ì‹œì¼°ìŒì—ë„ ë§ì´ì•¼. ìë„¤ê°€ ì´ì§„ìˆ˜ `11111111`ì— 1ì„ ë”í•˜ë©´, ì´ ìˆ˜ëŠ” `00000000`ìœ¼ë¡œ ëŒì•„ê°€ë„¤. ì‹œê³„ê°€ `23:59`ì—ì„œ `00:00`ìœ¼ë¡œ ê°€ë“¯ì´ ë§ì´ì•¼.

ì–¸ë”í”Œë¡œìš°ëŠ” ì´ì™€ ìœ ì‚¬í•˜ê²Œ ìë„¤ê°€ `0` ê°’ì„ ê°€ì§„ `uint8`ì—ì„œ `1`ì„ ë¹¼ë©´, `255`ì™€ ê°™ì•„ì§€ëŠ” ê²ƒì„ ë§í•˜ë„¤(`uint`ì— ë¶€í˜¸ê°€ ì—†ì–´, ìŒìˆ˜ê°€ ë  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ì§€).

### SafeMath ì‚¬ìš©í•˜ê¸°

- ì´ë¥¼ ë§‰ê¸° ìœ„í•´, OpenZeppelinì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì´ëŸ° ë¬¸ì œë¥¼ ë§‰ì•„ì£¼ëŠ” SafeMathë¼ê³  í•˜ëŠ” ***ë¼ì´ë¸ŒëŸ¬ë¦¬\***ë¥¼ ë§Œë“¤ì—ˆë„¤.

***ë¼ì´ë¸ŒëŸ¬ë¦¬(Library)\***ëŠ” ì†”ë¦¬ë””í‹°ì—ì„œ íŠ¹ë³„í•œ ì¢…ë¥˜ì˜ ì»¨íŠ¸ë™íŠ¸ì´ë„¤. ì´ê²Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” ê²½ìš° ì¤‘ í•˜ë‚˜ëŠ” ê¸°ë³¸(native) ë°ì´í„° íƒ€ì…ì— í•¨ìˆ˜ë¥¼ ë¶™ì¼ ë•Œì´ë„¤.

ì˜ˆë¥¼ ë“¤ì–´, SafeMath ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì“¸ ë•ŒëŠ” `using SafeMath for uint256`ì´ë¼ëŠ” êµ¬ë¬¸ì„ ì‚¬ìš©í•  ê²ƒì´ë„¤. SafeMath ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” 4ê°œì˜ í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆë„¤ - `add`, `sub`, `mul`, ê·¸ë¦¬ê³  `div`ê°€ ìˆë„¤. ê·¸ë¦¬ê³  ì´ì œ ìš°ë¦¬ëŠ” `uint256`ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì´ í•¨ìˆ˜ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„¤.

```js
using SafeMath for uint256;

uint256 a = 5;
uint256 b = a.add(3); // 5 + 3 = 8
uint256 c = a.mul(2); // 5 * 2 = 10
```



```JS
import "./safemath.sol";
contract ZombieFactory is Ownable {

  // 2. ì—¬ê¸°ì— using safemathë¥¼ ì„ ì–¸í•˜ê²Œ.
  using SafeMath for uint256;
```

### 

## SafeMath íŒŒíŠ¸ 2

### SafeMath

```js
pragma solidity ^0.4.18;

/**
 * @title SafeMath
 * @dev Math operations with safety checks that throw on error
 */
library SafeMath {

  /**
  * @dev Multiplies two numbers, throws on overflow.
  */
  function mul(uint256 a, uint256 b) internal pure returns (uint256) {
    if (a == 0) {
      return 0;
    }
    uint256 c = a * b;
    assert(c / a == b);
    return c;
  }

  /**
  * @dev Integer division of two numbers, truncating the quotient.
  */
  function div(uint256 a, uint256 b) internal pure returns (uint256) {
    // assert(b > 0); // Solidity automatically throws when dividing by 0
    uint256 c = a / b;
    // assert(a == b * c + a % b); // There is no case in which this doesn't hold
    return c;
  }

  /**
  * @dev Subtracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).
  */
  function sub(uint256 a, uint256 b) internal pure returns (uint256) {
    assert(b <= a);
    return a - b;
  }

  /**
  * @dev Adds two numbers, throws on overflow.
  */
  function add(uint256 a, uint256 b) internal pure returns (uint256) {
    uint256 c = a + b;
    assert(c >= a);
    return c;
  }
}

```

- ë¨¼ì € ìš°ë¦¬ëŠ” `library` í‚¤ì›Œë“œë¥¼ ë³¼ ê²ƒì´ë„¤ - ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” `contract`ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ ì¡°ê¸ˆ ë‹¤ë¥¸ ì ì´ ìˆì§€. ìš°ë¦¬ì˜ ê²½ìš°ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ìš°ë¦¬ê°€ `using` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë„¤. ì´ë¥¼ í†µí•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë©”ì†Œë“œë“¤ì„ ë‹¤ë¥¸ ë°ì´í„° íƒ€ì…ì— ì ìš©í•  ìˆ˜ ìˆì§€.

```js
using SafeMath for uint;
// ìš°ë¦¬ëŠ” ì´ì œ ì´ ë©”ì†Œë“œë“¤ì„ ì•„ë¬´ uintì—ì„œë‚˜ ì“¸ ìˆ˜ ìˆë„¤.
uint test = 2;
test = test.mul(3); // testëŠ” ì´ì œ 6ì´ ë˜ë„¤
test = test.add(5); // testëŠ” ì´ì œ 11ì´ ë˜ë„¤
```



## SafeMath íŒŒíŠ¸ 3

- ì—¬ê¸°ì„œë„ ì•ˆì „ì„ ìœ„í•´ ì˜¤ë²„í”Œë¡œìš°ë¥¼ ë§‰ì•„ì•¼ í•  ê²ƒì´ë„¤(ì¼ë°˜ì ìœ¼ë¡œ ê¸°ë³¸ ìˆ˜í•™ ì—°ì‚°ë³´ë‹¤ SafeMathë¥¼ ì“°ëŠ” ê²ƒì´ ì¢‹ë„¤. í–¥í›„ì˜ ì†”ë¦¬ë””í‹° ë²„ì „ì—ì„œëŠ” ì´ê²Œ ê¸°ë³¸ìœ¼ë¡œ í¬í•¨ë  ìˆ˜ë„ ìˆê² ì§€ë§Œ, ì§€ê¸ˆì€ ìš°ë¦¬ ì½”ë“œì— ì¶”ê°€ì ì¸ ë³´ì•ˆ ì¡°ì¹˜ë¥¼ í•´ì•¼ í•˜ë„¤).

- í•˜ì§€ë§Œ ì—¬ê¸°ì— ì‘ì€ ë¬¸ì œê°€ ìˆë„¤ - `winCount`ì™€ `lossCount`ëŠ” `uint16`ì´ê³ , `level`ì€ `uint32`ì¸ ê²ƒì´ì§€. ì¦‰ ìš°ë¦¬ê°€ ì´ëŸ° ì¸ìˆ˜ë“¤ì„ ì¨ì„œ SafeMathì˜ `add` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´, ì´ íƒ€ì…ë“¤ì„ `uint256`ìœ¼ë¡œ ë°”ê¿€ ê²ƒì´ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œ ì˜¤ë²„í”Œë¡œìš°ë¥¼ ë§‰ì•„ì£¼ì§€ ëª»í•˜ë„¤.

  ```js
  function add(uint256 a, uint256 b) internal pure returns (uint256) {
    uint256 c = a + b;
    assert(c >= a);
    return c;
  }
  ```



```js
  // 1. using SafeMath32 for uint32ë¥¼ ì„ ì–¸í•˜ê²Œ.
  using SafeMath32 for uint32;
  // 2. using SafeMath16 for uint16ë¥¼ ì„ ì–¸í•˜ê²Œ.
  using SafeMath16 for uint16;
```



## ì£¼ì„(Comment)

- í•œì¤„ ì£¼ì„

```js
// ì´ê²Œ í•œ ì¤„ ì£¼ì„ì´ë„¤. ìì‹  ë˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì— ëŒ€í•œ ë©”ëª¨ì™€ë„ ê°™ì€ ê²ƒì´ì§€.
```

- ì—¬ëŸ¬ì¤„ ì£¼ì„

```js
contract CryptoZombies {
  /* This is a multi-lined comment. I'd like to thank all of you
    who have taken your time to try this programming course.
    I know it's free to all of you, and it will stay free
    forever, but we still put our heart and soul into making
    this as good as it can be.

    Know that this is still the beginning of Blockchain development.
    We've come very far but there are so many ways to make this
    community better. If we made a mistake somewhere, you can
    help us out and open a pull request here:
    https://github.com/loomnetwork/cryptozombie-lessons

    Or if you have some ideas, comments, or just want to say
    hi - drop by our Telegram community at https://t.me/loomnetworkkr
  */
}
```



- ì†”ë¦¬ë””í‹° ì»¤ë®¤ë‹ˆí‹°ì—ì„œ í‘œì¤€ìœ¼ë¡œ ì“°ì´ëŠ” í˜•ì‹ì€ ***natspec\***ì´ë¼ ë¶ˆë¦¬ë„¤. ì•„ë˜ì™€ ê°™ì´ ìƒê²¼ì§€:

```js
/// @title ê¸°ë³¸ì ì¸ ì‚°ìˆ˜ë¥¼ ìœ„í•œ ì»¨íŠ¸ë™íŠ¸
/// @author H4XF13LD MORRIS ğŸ’¯ğŸ’¯ğŸ˜ğŸ’¯ğŸ’¯
/// @notice ì§€ê¸ˆì€ ê³±í•˜ê¸° í•¨ìˆ˜ë§Œ ì¶”ê°€í•œë‹¤.
contract Math {
  /// @notice 2ê°œì˜ ìˆ«ìë¥¼ ê³±í•œë‹¤.
  /// @param x ì²« ë²ˆì¨° uint.
  /// @param y ë‘ ë²ˆì§¸ uint.
  /// @return z (x * y) ê³±ì˜ ê°’
  /// @dev ì´ í•¨ìˆ˜ëŠ” í˜„ì¬ ì˜¤ë²„í”Œë¡œìš°ë¥¼ í™•ì¸í•˜ì§€ ì•ŠëŠ”ë‹¤.
  function multiply(uint x, uint y) returns (uint z) {
    // ì´ê²ƒì€ ì¼ë°˜ì ì¸ ì£¼ì„ìœ¼ë¡œ, natspecì— í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤.
    z = x * y;
  }
}
```

`@title`ê³¼ `@author`ëŠ” ë”°ë¡œ ì„¤ëª…ì´ í•„ìš” ì—†ì„ ê²ƒ ê°™êµ°.

`@notice`ëŠ” **ì‚¬ìš©ì**ì—ê²Œ ì»¨íŠ¸ë™íŠ¸/í•¨ìˆ˜ê°€ ë¬´ì—‡ì„ í•˜ëŠ”ì§€ ì„¤ëª…í•˜ë„¤. `@dev`ëŠ” ê°œë°œìì—ê²Œ ì¶”ê°€ì ì¸ ìƒì„¸ ì •ë³´ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ì§€.

`@param`ê³¼ `@return`ì€ í•¨ìˆ˜ì—ì„œ ì–´ë–¤ ë§¤ê°œ ë³€ìˆ˜ì™€ ë°˜í™˜ê°’ì„ ê°€ì§€ëŠ”ì§€ ì„¤ëª…í•˜ë„¤.

ìë„¤ê°€ ëª¨ë“  í•¨ìˆ˜ì— ëŒ€í•´ ê¼­ ì´ ëª¨ë“  íƒœê·¸ë“¤ì„ í•­ìƒ ì¨ì•¼ë§Œ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¼ëŠ” ì ì„ ëª…ì‹¬í•˜ê²Œ - ëª¨ë“  íƒœê·¸ëŠ” í•„ìˆ˜ê°€ ì•„ë‹ˆë„¤. í•˜ì§€ë§Œ ì ì–´ë„, ê°ê°ì˜ í•¨ìˆ˜ê°€ ì–´ë–¤ ê²ƒì„ í•˜ëŠ”ì§€ ì„¤ëª…í•˜ë„ë¡ `@dev`ëŠ” ë‚¨ê¸°ë„ë¡ í•˜ê²Œ.